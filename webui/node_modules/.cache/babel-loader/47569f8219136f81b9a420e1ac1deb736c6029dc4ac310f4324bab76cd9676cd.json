{"ast":null,"code":"import axios from 'axios';\nimport { handleAPIError } from './utils/apiErrorHandler';\nconst TOKEN_KEY = 'poker_token';\nexport const setToken = t => localStorage.setItem(TOKEN_KEY, t);\nexport const clearToken = () => localStorage.removeItem(TOKEN_KEY);\nconst getToken = () => localStorage.getItem(TOKEN_KEY);\nconst api = axios.create({\n  baseURL: '/api'\n});\n\n// inject header\napi.interceptors.request.use(config => {\n  const t = getToken();\n  if (t) config.headers['Authorization'] = `Bearer ${t}`;\n  return config;\n});\n\n// auto logout on 401 and handle errors\napi.interceptors.response.use(res => res, err => {\n  const errorInfo = handleAPIError(err);\n  if (err.response && err.response.status === 401) {\n    clearToken();\n    window.location.href = '/login';\n  }\n\n  // Add error info to the error object for components to use\n  err.errorInfo = errorInfo;\n  return Promise.reject(err);\n});\nexport const createGame = data => api.post('/game', data);\nexport const addBuyIn = (gameId, data) => api.post(`/game/${gameId}/player`, data);\nexport const addCashOut = (gameId, data) => api.post(`/game/${gameId}/cashout`, data);\nexport const fetchSummary = gameId => api.get(`/game/${gameId}/summary`);\nexport const fetchSettlement = gameId => api.get(`/game/${gameId}/settle`);\nexport const listGames = () => api.get('/games');\nexport const login = data => api.post('/login', data);\nexport const registerUser = data => api.post('/register', data);\nexport const deleteGame = id => api.delete(`/game/${id}`);\nexport const renameGame = (id, title) => api.patch(`/game/${id}/title`, {\n  title\n});\nexport const updateGameDate = (id, date) => api.patch(`/game/${id}/date`, {\n  date\n});\nexport const updateBuyIn = (gameId, name, idx, amount) => api.patch(`/game/${gameId}/player/${encodeURIComponent(name)}/buyin/${idx}`, {\n  amount\n});\nexport const deleteBuyIn = (gameId, name, idx) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}/buyin/${idx}`);\nexport const removePlayer = (gameId, name) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}`);\nexport default api;","map":{"version":3,"names":["axios","handleAPIError","TOKEN_KEY","setToken","t","localStorage","setItem","clearToken","removeItem","getToken","getItem","api","create","baseURL","interceptors","request","use","config","headers","response","res","err","errorInfo","status","window","location","href","Promise","reject","createGame","data","post","addBuyIn","gameId","addCashOut","fetchSummary","get","fetchSettlement","listGames","login","registerUser","deleteGame","id","delete","renameGame","title","patch","updateGameDate","date","updateBuyIn","name","idx","amount","encodeURIComponent","deleteBuyIn","removePlayer"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/api.js"],"sourcesContent":["import axios from 'axios';\nimport { handleAPIError } from './utils/apiErrorHandler';\n\nconst TOKEN_KEY = 'poker_token';\nexport const setToken = (t) => localStorage.setItem(TOKEN_KEY, t);\nexport const clearToken = () => localStorage.removeItem(TOKEN_KEY);\nconst getToken = () => localStorage.getItem(TOKEN_KEY);\n\nconst api = axios.create({\n  baseURL: '/api', \n});\n\n// inject header\napi.interceptors.request.use((config) => {\n  const t = getToken();\n  if (t) config.headers['Authorization'] = `Bearer ${t}`;\n  return config;\n});\n\n// auto logout on 401 and handle errors\napi.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    const errorInfo = handleAPIError(err);\n    \n    if (err.response && err.response.status === 401) {\n      clearToken();\n      window.location.href = '/login';\n    }\n    \n    // Add error info to the error object for components to use\n    err.errorInfo = errorInfo;\n    return Promise.reject(err);\n  }\n);\n\nexport const createGame = (data) => api.post('/game', data);\nexport const addBuyIn = (gameId, data) => api.post(`/game/${gameId}/player`, data);\nexport const addCashOut = (gameId, data) => api.post(`/game/${gameId}/cashout`, data);\nexport const fetchSummary = (gameId) => api.get(`/game/${gameId}/summary`);\nexport const fetchSettlement = (gameId) => api.get(`/game/${gameId}/settle`);\nexport const listGames = () => api.get('/games');\nexport const login = (data) => api.post('/login', data);\nexport const registerUser = (data) => api.post('/register', data);\nexport const deleteGame = (id) => api.delete(`/game/${id}`);\nexport const renameGame = (id, title) => api.patch(`/game/${id}/title`, { title });\nexport const updateGameDate = (id, date) => api.patch(`/game/${id}/date`, { date });\nexport const updateBuyIn = (gameId,name,idx,amount) => api.patch(`/game/${gameId}/player/${encodeURIComponent(name)}/buyin/${idx}`, { amount });\nexport const deleteBuyIn = (gameId,name,idx) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}/buyin/${idx}`);\nexport const removePlayer = (gameId, name) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}`);\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}