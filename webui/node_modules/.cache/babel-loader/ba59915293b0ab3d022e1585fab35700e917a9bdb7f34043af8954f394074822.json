{"ast":null,"code":"import _objectSpread from\"/Users/krishdembla/Desktop/poker-debt-app/webui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import{useNavigate,Link}from'react-router-dom';import{registerUser,setToken}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[isOpen,setIsOpen]=useState(true);const[form,setForm]=useState({username:'',password:'',confirmPassword:''});const[isSubmitting,setIsSubmitting]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{setIsOpen(true);setForm({username:'',password:'',confirmPassword:''});setError(null);setIsSubmitting(false);},[]);const handleSubmit=async e=>{e.preventDefault();if(isSubmitting)return;if(!form.username.trim()||!form.password||!form.confirmPassword){setError('All fields are required');return;}if(form.password!==form.confirmPassword){setError('Passwords do not match');return;}setIsSubmitting(true);try{const res=await registerUser({username:form.username,password:form.password});setToken(res.data.token);setIsOpen(false);navigate('/');}catch(e){var _e$response,_e$response$data;setError(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||'Registration failed');}finally{setIsSubmitting(false);}};const handleClose=()=>{setIsOpen(false);navigate('/login');};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"dialog-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Register\"}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#ffebee',color:'#c62828',padding:'0.75rem',borderRadius:'4px',marginBottom:'1rem',fontSize:'0.875rem'},children:[\"\\u26A0\\uFE0F \",error]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registerUsername\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"registerUsername\",type:\"text\",value:form.username,onChange:e=>{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{username:e.target.value}));if(error)setError(null);},placeholder:\"Enter username\",autoComplete:\"off\",autoFocus:true,required:true,className:\"dialog-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registerPassword\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"registerPassword\",type:\"password\",value:form.password,onChange:e=>{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{password:e.target.value}));if(error)setError(null);},placeholder:\"Enter password\",autoComplete:\"new-password\",required:true,className:\"dialog-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"registerConfirmPassword\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"registerConfirmPassword\",type:\"password\",value:form.confirmPassword,onChange:e=>{setForm(prev=>_objectSpread(_objectSpread({},prev),{},{confirmPassword:e.target.value}));if(error)setError(null);},placeholder:\"Re-enter password\",autoComplete:\"new-password\",required:true,className:\"dialog-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dialog-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"cancel-btn\",onClick:handleClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",disabled:!form.username.trim()||!form.password||!form.confirmPassword||isSubmitting,\"aria-busy\":isSubmitting,children:\"Register\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:'1rem',textAlign:'center'},children:[\"Have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]})});};export default Register;","map":{"version":3,"names":["useState","useEffect","useNavigate","Link","registerUser","setToken","jsx","_jsx","jsxs","_jsxs","Register","isOpen","setIsOpen","form","setForm","username","password","confirmPassword","isSubmitting","setIsSubmitting","error","setError","navigate","handleSubmit","e","preventDefault","trim","res","data","token","_e$response","_e$response$data","response","handleClose","className","children","style","backgroundColor","color","padding","borderRadius","marginBottom","fontSize","onSubmit","htmlFor","id","type","value","onChange","prev","_objectSpread","target","placeholder","autoComplete","autoFocus","required","onClick","disabled","marginTop","textAlign","to"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/pages/Register.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { registerUser, setToken } from '../api';\n\nconst Register = () => {\n  const [isOpen, setIsOpen] = useState(true);\n  const [form, setForm] = useState({ username: '', password: '', confirmPassword: '' });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setIsOpen(true);\n    setForm({ username: '', password: '', confirmPassword: '' });\n    setError(null);\n    setIsSubmitting(false);\n  }, []);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (isSubmitting) return;\n    if (!form.username.trim() || !form.password || !form.confirmPassword) {\n      setError('All fields are required');\n      return;\n    }\n    if (form.password !== form.confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n    setIsSubmitting(true);\n    try {\n      const res = await registerUser({ username: form.username, password: form.password });\n      setToken(res.data.token);\n      setIsOpen(false);\n      navigate('/');\n    } catch (e) {\n      setError(e.response?.data?.error || 'Registration failed');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n    navigate('/login');\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"dialog-overlay\">\n      <div className=\"dialog-content\">\n        <h3>Register</h3>\n        {error && (\n          <div style={{\n            backgroundColor: '#ffebee',\n            color: '#c62828',\n            padding: '0.75rem',\n            borderRadius: '4px',\n            marginBottom: '1rem',\n            fontSize: '0.875rem'\n          }}>\n            ⚠️ {error}\n          </div>\n        )}\n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"registerUsername\">Username</label>\n            <input\n              id=\"registerUsername\"\n              type=\"text\"\n              value={form.username}\n              onChange={(e) => {\n                setForm(prev => ({ ...prev, username: e.target.value }));\n                if (error) setError(null);\n              }}\n              placeholder=\"Enter username\"\n              autoComplete=\"off\"\n              autoFocus\n              required\n              className=\"dialog-input\"\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"registerPassword\">Password</label>\n            <input\n              id=\"registerPassword\"\n              type=\"password\"\n              value={form.password}\n              onChange={(e) => {\n                setForm(prev => ({ ...prev, password: e.target.value }));\n                if (error) setError(null);\n              }}\n              placeholder=\"Enter password\"\n              autoComplete=\"new-password\"\n              required\n              className=\"dialog-input\"\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"registerConfirmPassword\">Confirm Password</label>\n            <input\n              id=\"registerConfirmPassword\"\n              type=\"password\"\n              value={form.confirmPassword}\n              onChange={(e) => {\n                setForm(prev => ({ ...prev, confirmPassword: e.target.value }));\n                if (error) setError(null);\n              }}\n              placeholder=\"Re-enter password\"\n              autoComplete=\"new-password\"\n              required\n              className=\"dialog-input\"\n            />\n          </div>\n          <div className=\"dialog-actions\">\n            <button type=\"button\" className=\"cancel-btn\" onClick={handleClose}>\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              className=\"submit-btn\"\n              disabled={\n                !form.username.trim() ||\n                !form.password ||\n                !form.confirmPassword ||\n                isSubmitting\n              }\n              aria-busy={isSubmitting}\n            >\n              Register\n            </button>\n          </div>\n        </form>\n        <p style={{ marginTop: '1rem', textAlign: 'center' }}>\n          Have an account? <Link to=\"/login\">Login</Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}