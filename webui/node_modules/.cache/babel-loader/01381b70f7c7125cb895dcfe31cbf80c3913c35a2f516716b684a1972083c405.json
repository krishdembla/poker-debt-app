{"ast":null,"code":"var _jsxFileName = \"/Users/krishdembla/Desktop/poker-debt-app/webui/src/pages/GamePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState, useMemo, useRef } from 'react';\nimport './GamePage.css';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { addBuyIn, removePlayer, addCashOut, fetchSummary, fetchSettlement } from '../api';\nimport AlertBanner from '../components/AlertBanner';\nimport ThemeToggle from '../components/ThemeToggle';\nimport ConfirmDialog from '../components/ConfirmDialog';\nimport { useToast } from '../context/ToastContext';\nimport TransactionHistoryDialog from '../components/TransactionHistoryDialog';\nimport PlayerCard from '../components/PlayerCard/PlayerCard';\nimport AddPlayerDialog from '../components/AddPlayerDialog/AddPlayerDialog';\nimport { GameContext } from '../context/GameContext';\nimport { useWebSocket } from '../context/WebSocketContext';\nimport { useKeyboardShortcuts } from '../hooks/useKeyboardShortcuts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getFormatter = cur => new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: cur\n});\nconst GamePage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    setGameId\n  } = useContext(GameContext);\n  const {\n    joinGame,\n    leaveGame,\n    ws\n  } = useWebSocket();\n  const [summary, setSummary] = useState([]);\n  const [currency, setCurrency] = useState('USD');\n  const [title, setTitle] = useState('Game');\n  const formatter = getFormatter(currency);\n  const [transactions, setTransactions] = useState([]);\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  // computed totals\n  const totals = useMemo(() => {\n    const buyInsTotal = summary.reduce((s, p) => s + p.totalBuyIn, 0);\n    const cashOutTotal = summary.reduce((s, p) => s + (p.cashOut || 0), 0);\n    return {\n      buyInsTotal,\n      cashOutTotal,\n      profit: buyInsTotal - cashOutTotal\n    };\n  }, [summary]);\n  const [historyOpen, setHistoryOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState(null);\n  const [error, setError] = useState('');\n  const [confirm, setConfirm] = useState({\n    open: false,\n    message: '',\n    action: () => {}\n  });\n  const {\n    showToast\n  } = useToast();\n  const [lastSaved, setLastSaved] = useState(null);\n  const autoSaveTimeoutRef = useRef(null);\n  useEffect(() => {\n    setGameId(id);\n    refreshSummary();\n\n    // Join WebSocket room for this game\n    joinGame(id);\n\n    // Set up WebSocket message handler\n    if (ws) {\n      const handleMessage = event => {\n        try {\n          const data = JSON.parse(event.data);\n          if (data.type === 'game_update' && data.data) {\n            // Refresh summary when we receive updates\n            refreshSummary();\n            showToast('Game updated in real-time');\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      ws.addEventListener('message', handleMessage);\n      return () => {\n        ws.removeEventListener('message', handleMessage);\n        leaveGame();\n      };\n    }\n    // eslint-disable-next-line\n  }, [id, ws]);\n  const refreshSummary = async () => {\n    var _res$data$metadata, _res$data$metadata2;\n    const res = await fetchSummary(id);\n    setSummary(res.data.summary);\n    if ((_res$data$metadata = res.data.metadata) !== null && _res$data$metadata !== void 0 && _res$data$metadata.currency) {\n      setCurrency(res.data.metadata.currency);\n    }\n    if ((_res$data$metadata2 = res.data.metadata) !== null && _res$data$metadata2 !== void 0 && _res$data$metadata2.title) {\n      setTitle(res.data.metadata.title);\n    }\n    setError('');\n  };\n\n  // Auto-save functionality\n  const triggerAutoSave = () => {\n    if (autoSaveTimeoutRef.current) {\n      clearTimeout(autoSaveTimeoutRef.current);\n    }\n    autoSaveTimeoutRef.current = setTimeout(() => {\n      setLastSaved(new Date());\n      showToast('Auto-saved', 'success');\n    }, 2000); // Auto-save after 2 seconds of inactivity\n  };\n  const handleAddPlayer = async playerData => {\n    try {\n      await addBuyIn(id, {\n        name: playerData.name,\n        buyIn: Number(playerData.amount)\n      });\n      refreshSummary();\n      triggerAutoSave();\n      showToast('Player added successfully');\n    } catch (err) {\n      var _err$errorInfo, _err$response, _err$response$data;\n      console.error('Error adding player:', err);\n      const errorMessage = ((_err$errorInfo = err.errorInfo) === null || _err$errorInfo === void 0 ? void 0 : _err$errorInfo.message) || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to add player';\n      setError(errorMessage);\n    }\n  };\n  const handleSettle = async () => {\n    try {\n      const res = await fetchSettlement(id);\n      const txns = res.data.transactions;\n      setTransactions(txns);\n      showToast('Settlement calculated');\n    } catch (err) {\n      if (err.response && err.response.data.error) {\n        setError(err.response.data.error);\n      } else {\n        console.error(err);\n        setError('Unexpected error settling debts');\n      }\n    }\n  };\n\n  // Keyboard shortcuts - moved after function definitions\n  useKeyboardShortcuts({\n    onAddPlayer: () => setShowAddDialog(true),\n    onSettle: handleSettle,\n    onRefresh: refreshSummary,\n    onGoHome: () => navigate('/'),\n    enabled: true\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"brand\",\n      children: \"ChipMate\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginTop: '0.5rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        children: \"\\u2190 Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          flex: 1,\n          textAlign: 'center'\n        },\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ThemeToggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(AlertBanner, {\n      message: error,\n      onClose: () => setError('')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(AddPlayerDialog, {\n      isOpen: showAddDialog,\n      onClose: () => setShowAddDialog(false),\n      onAddPlayer: handleAddPlayer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '1rem 0',\n        padding: '1rem',\n        border: '1px solid var(--border-color,#ccc)',\n        borderRadius: '8px',\n        display: 'flex',\n        gap: '2rem',\n        flexWrap: 'wrap'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Total Buy-Ins:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 14\n        }, this), \" \", formatter.format(totals.buyInsTotal)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Total Cash-Outs:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 14\n        }, this), \" \", formatter.format(totals.cashOutTotal)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"House Profit:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 14\n        }, this), \" \", formatter.format(totals.profit)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"players-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), summary.length === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-first-player-btn\",\n        onClick: () => setShowAddDialog(true),\n        children: \"+ Add First Player\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-list-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-list\",\n        children: summary.map(player => /*#__PURE__*/_jsxDEV(PlayerCard, {\n          name: player.name,\n          totalBuyIn: player.totalBuyIn,\n          cashOut: player.cashOut,\n          net: player.net,\n          formatter: formatter,\n          onEditBuyIn: () => {\n            setSelectedPlayer(player);\n            setHistoryOpen(true);\n          },\n          onEditCashOut: async () => {\n            const newCashOut = window.prompt(`Enter cash-out amount for ${player.name}:`, player.cashOut || '');\n\n            // Apply styles to the prompt\n            setTimeout(() => {\n              const promptInput = document.querySelector('input[type=\"text\"]');\n              if (promptInput) {\n                promptInput.style.backgroundColor = 'var(--bg-color, #ffffff)';\n                promptInput.style.color = 'var(--text-primary, #333333)';\n                promptInput.style.border = '1px solid var(--border-color, #cccccc)';\n                promptInput.style.padding = '8px';\n                promptInput.style.borderRadius = '4px';\n                promptInput.style.width = 'calc(100% - 20px)';\n                promptInput.style.maxWidth = '300px';\n              }\n            }, 10);\n            if (newCashOut !== null) {\n              const val = Number(newCashOut);\n              if (!isNaN(val) && val >= 0) {\n                await addCashOut(id, {\n                  name: player.name,\n                  cashOut: val\n                });\n                refreshSummary();\n                triggerAutoSave();\n              } else if (newCashOut === '') {\n                await addCashOut(id, {\n                  name: player.name,\n                  cashOut: 0\n                });\n                refreshSummary();\n                triggerAutoSave();\n              } else {\n                showToast('Please enter a valid number');\n              }\n            }\n          },\n          onViewHistory: () => {\n            setSelectedPlayer(player);\n            setHistoryOpen(true);\n          },\n          onDelete: () => {\n            setConfirm({\n              open: true,\n              message: `Are you sure you want to remove ${player.name}?`,\n              action: async () => {\n                try {\n                  await removePlayer(id, player.name);\n                  refreshSummary();\n                  triggerAutoSave();\n                  showToast('Player removed successfully');\n                } catch (err) {\n                  var _err$response2, _err$response2$data;\n                  setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to remove player');\n                }\n              }\n            });\n          }\n        }, player.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this), summary.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-player-button\",\n        onClick: () => setShowAddDialog(true),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '1.2rem'\n          },\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), \" Add Player\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settle-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSettle,\n        className: \"settle-button\",\n        children: \"Settle Debts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmDialog, {\n      open: confirm.open,\n      message: confirm.message,\n      onCancel: () => setConfirm({\n        ...confirm,\n        open: false\n      }),\n      onConfirm: async () => {\n        await confirm.action();\n        setConfirm({\n          ...confirm,\n          open: false\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this), transactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: 'var(--text-primary, #333)',\n          marginBottom: '1rem',\n          fontSize: '1.25rem',\n          fontWeight: '600',\n          paddingBottom: '0.5rem',\n          borderBottom: '2px solid var(--border-color, #eee)'\n        },\n        children: \"Settlement Transactions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"tx-list\",\n        style: {\n          listStyle: 'none',\n          padding: 0,\n          border: '1px solid var(--border-color, #ddd)',\n          borderRadius: '8px',\n          overflow: 'hidden',\n          boxShadow: '0 2px 8px rgba(0,0,0,0.08)'\n        },\n        children: transactions.map((t, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"tx-item\",\n          style: {\n            padding: '1rem 1.25rem',\n            borderBottom: idx < transactions.length - 1 ? '1px solid var(--border-color, #eee)' : 'none',\n            backgroundColor: idx % 2 === 0 ? 'var(--bg-color, #fff)' : 'rgba(0, 0, 0, 0.02)',\n            color: 'var(--text-primary, #333)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            flexWrap: 'wrap',\n            lineHeight: '1.5'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: '600',\n              color: 'var(--text-primary, #333)'\n            },\n            children: t.from\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'var(--text-secondary, #666)'\n            },\n            children: \"pays\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: '600',\n              color: 'var(--text-primary, #333)'\n            },\n            children: t.to\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'var(--text-secondary, #666)'\n            },\n            children: \":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"amount\",\n            style: {\n              fontWeight: '700',\n              color: 'var(--accent, #ff6b3d)',\n              marginLeft: 'auto',\n              paddingLeft: '1rem'\n            },\n            children: formatter.format(t.amount)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TransactionHistoryDialog, {\n      open: historyOpen,\n      player: selectedPlayer,\n      gameId: id,\n      onClose: () => setHistoryOpen(false),\n      refreshSummary: refreshSummary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n_s(GamePage, \"1gQEPHdE9dvWi8fQgtJikH/JEBA=\", false, function () {\n  return [useParams, useNavigate, useWebSocket, useToast, useKeyboardShortcuts];\n});\n_c = GamePage;\nexport default GamePage;\nvar _c;\n$RefreshReg$(_c, \"GamePage\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useMemo","useRef","useParams","useNavigate","addBuyIn","removePlayer","addCashOut","fetchSummary","fetchSettlement","AlertBanner","ThemeToggle","ConfirmDialog","useToast","TransactionHistoryDialog","PlayerCard","AddPlayerDialog","GameContext","useWebSocket","useKeyboardShortcuts","jsxDEV","_jsxDEV","getFormatter","cur","Intl","NumberFormat","style","currency","GamePage","_s","id","navigate","setGameId","joinGame","leaveGame","ws","summary","setSummary","setCurrency","title","setTitle","formatter","transactions","setTransactions","showAddDialog","setShowAddDialog","totals","buyInsTotal","reduce","s","p","totalBuyIn","cashOutTotal","cashOut","profit","historyOpen","setHistoryOpen","selectedPlayer","setSelectedPlayer","error","setError","confirm","setConfirm","open","message","action","showToast","lastSaved","setLastSaved","autoSaveTimeoutRef","refreshSummary","handleMessage","event","data","JSON","parse","type","console","addEventListener","removeEventListener","_res$data$metadata","_res$data$metadata2","res","metadata","triggerAutoSave","current","clearTimeout","setTimeout","Date","handleAddPlayer","playerData","name","buyIn","Number","amount","err","_err$errorInfo","_err$response","_err$response$data","errorMessage","errorInfo","response","handleSettle","txns","onAddPlayer","onSettle","onRefresh","onGoHome","enabled","className","children","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","alignItems","marginTop","onClick","flex","textAlign","onClose","isOpen","margin","padding","border","borderRadius","gap","flexWrap","format","length","map","player","net","onEditBuyIn","onEditCashOut","newCashOut","window","prompt","promptInput","document","querySelector","backgroundColor","color","width","maxWidth","val","isNaN","onViewHistory","onDelete","_err$response2","_err$response2$data","fontSize","onCancel","onConfirm","marginBottom","fontWeight","paddingBottom","borderBottom","listStyle","overflow","boxShadow","t","idx","lineHeight","from","to","marginLeft","paddingLeft","gameId","_c","$RefreshReg$"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/pages/GamePage.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState, useMemo, useRef } from 'react';\nimport './GamePage.css';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  addBuyIn,\n  removePlayer,\n  addCashOut,\n  fetchSummary,\n  fetchSettlement,\n} from '../api';\nimport AlertBanner from '../components/AlertBanner';\nimport ThemeToggle from '../components/ThemeToggle';\nimport ConfirmDialog from '../components/ConfirmDialog';\nimport { useToast } from '../context/ToastContext';\nimport TransactionHistoryDialog from '../components/TransactionHistoryDialog';\nimport PlayerCard from '../components/PlayerCard/PlayerCard';\nimport AddPlayerDialog from '../components/AddPlayerDialog/AddPlayerDialog';\nimport { GameContext } from '../context/GameContext';\nimport { useWebSocket } from '../context/WebSocketContext';\nimport { useKeyboardShortcuts } from '../hooks/useKeyboardShortcuts';\n\n\nconst getFormatter = (cur) => new Intl.NumberFormat('en-US', { style: 'currency', currency: cur });\n\n\nconst GamePage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { setGameId } = useContext(GameContext);\n  const { joinGame, leaveGame, ws } = useWebSocket();\n  const [summary, setSummary] = useState([]);\n  const [currency, setCurrency] = useState('USD');\n  const [title, setTitle] = useState('Game');\n  const formatter = getFormatter(currency);\n  const [transactions, setTransactions] = useState([]);\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  // computed totals\n  const totals = useMemo(() => {\n    const buyInsTotal = summary.reduce((s, p) => s + p.totalBuyIn, 0);\n    const cashOutTotal = summary.reduce((s, p) => s + (p.cashOut || 0), 0);\n    return { buyInsTotal, cashOutTotal, profit: buyInsTotal - cashOutTotal };\n  }, [summary]);\n\n  const [historyOpen, setHistoryOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState(null);\n  const [error, setError] = useState('');\n  const [confirm, setConfirm] = useState({ open: false, message: '', action: () => {} });\n  const { showToast } = useToast();\n  const [lastSaved, setLastSaved] = useState(null);\n  const autoSaveTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    setGameId(id);\n    refreshSummary();\n    \n    // Join WebSocket room for this game\n    joinGame(id);\n    \n    // Set up WebSocket message handler\n    if (ws) {\n      const handleMessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          if (data.type === 'game_update' && data.data) {\n            // Refresh summary when we receive updates\n            refreshSummary();\n            showToast('Game updated in real-time');\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      \n      ws.addEventListener('message', handleMessage);\n      \n      return () => {\n        ws.removeEventListener('message', handleMessage);\n        leaveGame();\n      };\n    }\n    // eslint-disable-next-line\n  }, [id, ws]);\n\n  const refreshSummary = async () => {\n    const res = await fetchSummary(id);\n    setSummary(res.data.summary);\n      if (res.data.metadata?.currency) {\n        setCurrency(res.data.metadata.currency);\n      }\n      if (res.data.metadata?.title) {\n        setTitle(res.data.metadata.title);\n        \n      }\n      setError('');\n  };\n\n  // Auto-save functionality\n  const triggerAutoSave = () => {\n    if (autoSaveTimeoutRef.current) {\n      clearTimeout(autoSaveTimeoutRef.current);\n    }\n    \n    autoSaveTimeoutRef.current = setTimeout(() => {\n      setLastSaved(new Date());\n      showToast('Auto-saved', 'success');\n    }, 2000); // Auto-save after 2 seconds of inactivity\n  };\n\n  const handleAddPlayer = async (playerData) => {\n    try {\n      await addBuyIn(id, { name: playerData.name, buyIn: Number(playerData.amount) });\n      refreshSummary();\n      triggerAutoSave();\n      showToast('Player added successfully');\n    } catch (err) {\n      console.error('Error adding player:', err);\n      const errorMessage = err.errorInfo?.message || err.response?.data?.error || 'Failed to add player';\n      setError(errorMessage);\n    }\n  };\n\n  const handleSettle = async () => {\n    try {\n      const res = await fetchSettlement(id);\n      const txns = res.data.transactions;\n      setTransactions(txns);\n      showToast('Settlement calculated');\n    } catch (err) {\n      if (err.response && err.response.data.error) {\n        setError(err.response.data.error);\n      } else {\n        console.error(err);\n        setError('Unexpected error settling debts');\n      }\n    }\n  };\n\n  // Keyboard shortcuts - moved after function definitions\n  useKeyboardShortcuts({\n    onAddPlayer: () => setShowAddDialog(true),\n    onSettle: handleSettle,\n    onRefresh: refreshSummary,\n    onGoHome: () => navigate('/'),\n    enabled: true\n  });\n\n  return (\n    <div className=\"container\">\n      <div className=\"brand\">ChipMate</div>\n      <div style={{ display:'flex', justifyContent:'space-between', alignItems:'center', marginTop:'0.5rem' }}>\n        <button onClick={()=>navigate('/')}>&larr; Home</button>\n        <h2 style={{ flex:1, textAlign:'center' }}>{title}</h2>\n        <ThemeToggle />\n      </div>\n      {error && <AlertBanner message={error} onClose={() => setError('')} />}\n      \n\n      {/* Add Player Dialog */}\n      <AddPlayerDialog\n        isOpen={showAddDialog}\n        onClose={() => setShowAddDialog(false)}\n        onAddPlayer={handleAddPlayer}\n      />\n\n      <div style={{margin:'1rem 0', padding:'1rem', border:'1px solid var(--border-color,#ccc)', borderRadius:'8px', display:'flex', gap:'2rem', flexWrap:'wrap'}}>\n        <div><strong>Total Buy-Ins:</strong> {formatter.format(totals.buyInsTotal)}</div>\n        <div><strong>Total Cash-Outs:</strong> {formatter.format(totals.cashOutTotal)}</div>\n        <div><strong>House Profit:</strong> {formatter.format(totals.profit)}</div>\n      </div>\n\n      <div className=\"players-header\">\n        <h3>Players</h3>\n        {summary.length === 0 && (\n          <button \n            className=\"add-first-player-btn\"\n            onClick={() => setShowAddDialog(true)}\n          >\n            + Add First Player\n          </button>\n        )}\n      </div>\n      <div className=\"player-list-container\">\n        <div className=\"player-list\">\n          {summary.map((player) => (\n            <PlayerCard\n              key={player.name}\n              name={player.name}\n              totalBuyIn={player.totalBuyIn}\n              cashOut={player.cashOut}\n              net={player.net}\n              formatter={formatter}\n              onEditBuyIn={() => {\n                setSelectedPlayer(player);\n                setHistoryOpen(true);\n              }}\n              onEditCashOut={async () => {\n                const newCashOut = window.prompt(\n                  `Enter cash-out amount for ${player.name}:`, \n                  player.cashOut || ''\n                );\n                \n                // Apply styles to the prompt\n                setTimeout(() => {\n                  const promptInput = document.querySelector('input[type=\"text\"]');\n                  if (promptInput) {\n                    promptInput.style.backgroundColor = 'var(--bg-color, #ffffff)';\n                    promptInput.style.color = 'var(--text-primary, #333333)';\n                    promptInput.style.border = '1px solid var(--border-color, #cccccc)';\n                    promptInput.style.padding = '8px';\n                    promptInput.style.borderRadius = '4px';\n                    promptInput.style.width = 'calc(100% - 20px)';\n                    promptInput.style.maxWidth = '300px';\n                  }\n                }, 10);\n                \n                if (newCashOut !== null) {\n                  const val = Number(newCashOut);\n                  if (!isNaN(val) && val >= 0) {\n                    await addCashOut(id, { name: player.name, cashOut: val });\n                    refreshSummary();\n                    triggerAutoSave();\n                  } else if (newCashOut === '') {\n                    await addCashOut(id, { name: player.name, cashOut: 0 });\n                    refreshSummary();\n                    triggerAutoSave();\n                  } else {\n                    showToast('Please enter a valid number');\n                  }\n                }\n              }}\n              onViewHistory={() => {\n                setSelectedPlayer(player);\n                setHistoryOpen(true);\n              }}\n              onDelete={() => {\n                setConfirm({\n                  open: true,\n                  message: `Are you sure you want to remove ${player.name}?`,\n                  action: async () => {\n                    try {\n                      await removePlayer(id, player.name);\n                      refreshSummary();\n                      triggerAutoSave();\n                      showToast('Player removed successfully');\n                    } catch (err) {\n                      setError(err.response?.data?.error || 'Failed to remove player');\n                    }\n                  }\n                });\n              }}\n            />\n          ))}\n        </div>\n        \n        {summary.length > 0 && (\n        <button \n          className=\"add-player-button\"\n          onClick={() => setShowAddDialog(true)}\n        >\n          <span style={{ fontSize: '1.2rem' }}>+</span> Add Player\n        </button>\n      )}\n      </div>\n\n      <div className=\"settle-button-container\">\n        <button \n          onClick={handleSettle}\n          className=\"settle-button\"\n        >\n          Settle Debts\n        </button>\n      </div>\n\n      <ConfirmDialog open={confirm.open} message={confirm.message} onCancel={()=>setConfirm({...confirm,open:false})} onConfirm={async ()=>{ await confirm.action(); setConfirm({...confirm,open:false}); }} />\n\n      {transactions.length > 0 && (\n        <div style={{ marginTop: '2rem' }}>\n          <h3 style={{ \n            color: 'var(--text-primary, #333)', \n            marginBottom: '1rem',\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            paddingBottom: '0.5rem',\n            borderBottom: '2px solid var(--border-color, #eee)'\n          }}>\n            Settlement Transactions\n          </h3>\n          <ul className=\"tx-list\" style={{ \n            listStyle: 'none', \n            padding: 0,\n            border: '1px solid var(--border-color, #ddd)',\n            borderRadius: '8px',\n            overflow: 'hidden',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.08)'\n          }}>\n            {transactions.map((t, idx) => (\n              <li key={idx} className=\"tx-item\" style={{\n                padding: '1rem 1.25rem',\n                borderBottom: idx < transactions.length - 1 ? '1px solid var(--border-color, #eee)' : 'none',\n                backgroundColor: idx % 2 === 0 ? 'var(--bg-color, #fff)' : 'rgba(0, 0, 0, 0.02)',\n                color: 'var(--text-primary, #333)',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                flexWrap: 'wrap',\n                lineHeight: '1.5'\n              }}>\n                <span style={{ fontWeight: '600', color: 'var(--text-primary, #333)' }}>{t.from}</span>\n                <span style={{ color: 'var(--text-secondary, #666)' }}>pays</span>\n                <span style={{ fontWeight: '600', color: 'var(--text-primary, #333)' }}>{t.to}</span>\n                <span style={{ color: 'var(--text-secondary, #666)' }}>:</span>\n                <span className=\"amount\" style={{\n                  fontWeight: '700',\n                  color: 'var(--accent, #ff6b3d)',\n                  marginLeft: 'auto',\n                  paddingLeft: '1rem'\n                }}>\n                  {formatter.format(t.amount)}\n                </span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      <TransactionHistoryDialog open={historyOpen} player={selectedPlayer} gameId={id} onClose={()=>setHistoryOpen(false)} refreshSummary={refreshSummary} />\n    </div>\n  );\n};\n\nexport default GamePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}