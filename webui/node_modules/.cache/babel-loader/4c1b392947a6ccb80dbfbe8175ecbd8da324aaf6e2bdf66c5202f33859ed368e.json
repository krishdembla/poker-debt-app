{"ast":null,"code":"import axios from 'axios';\nconst TOKEN_KEY = 'poker_token';\nexport const setToken = t => localStorage.setItem(TOKEN_KEY, t);\nexport const clearToken = () => localStorage.removeItem(TOKEN_KEY);\nconst getToken = () => localStorage.getItem(TOKEN_KEY);\nconst api = axios.create({\n  baseURL: '/api'\n});\n\n// inject header\napi.interceptors.request.use(config => {\n  const t = getToken();\n  if (t) config.headers['Authorization'] = `Bearer ${t}`;\n  return config;\n});\n\n// auto logout on 401\napi.interceptors.response.use(res => res, err => {\n  if (err.response && err.response.status === 401) {\n    clearToken();\n    window.location.href = '/login';\n  }\n  return Promise.reject(err);\n});\nexport const createGame = data => api.post('/game', data);\nexport const addBuyIn = (gameId, data) => api.post(`/game/${gameId}/player`, data);\nexport const addCashOut = (gameId, data) => api.post(`/game/${gameId}/cashout`, data);\nexport const fetchSummary = gameId => api.get(`/game/${gameId}/summary`);\nexport const fetchSettlement = gameId => api.get(`/game/${gameId}/settle`);\nexport const listGames = () => api.get('/games');\nexport const login = data => api.post('/login', data);\nexport const registerUser = data => api.post('/register', data);\nexport const deleteGame = id => api.delete(`/game/${id}`);\nexport const removePlayer = (gameId, name) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}`);\nexport default api;","map":{"version":3,"names":["axios","TOKEN_KEY","setToken","t","localStorage","setItem","clearToken","removeItem","getToken","getItem","api","create","baseURL","interceptors","request","use","config","headers","response","res","err","status","window","location","href","Promise","reject","createGame","data","post","addBuyIn","gameId","addCashOut","fetchSummary","get","fetchSettlement","listGames","login","registerUser","deleteGame","id","delete","removePlayer","name","encodeURIComponent"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst TOKEN_KEY = 'poker_token';\nexport const setToken = (t) => localStorage.setItem(TOKEN_KEY, t);\nexport const clearToken = () => localStorage.removeItem(TOKEN_KEY);\nconst getToken = () => localStorage.getItem(TOKEN_KEY);\n\nconst api = axios.create({\n  baseURL: '/api', \n});\n\n// inject header\napi.interceptors.request.use((config) => {\n  const t = getToken();\n  if (t) config.headers['Authorization'] = `Bearer ${t}`;\n  return config;\n});\n\n// auto logout on 401\napi.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    if (err.response && err.response.status === 401) {\n      clearToken();\n      window.location.href = '/login';\n    }\n    return Promise.reject(err);\n  }\n);\n\nexport const createGame = (data) => api.post('/game', data);\nexport const addBuyIn = (gameId, data) => api.post(`/game/${gameId}/player`, data);\nexport const addCashOut = (gameId, data) => api.post(`/game/${gameId}/cashout`, data);\nexport const fetchSummary = (gameId) => api.get(`/game/${gameId}/summary`);\nexport const fetchSettlement = (gameId) => api.get(`/game/${gameId}/settle`);\nexport const listGames = () => api.get('/games');\nexport const login = (data) => api.post('/login', data);\nexport const registerUser = (data) => api.post('/register', data);\nexport const deleteGame = (id) => api.delete(`/game/${id}`);\nexport const removePlayer = (gameId, name) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}`);\n\nexport default api;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAG,aAAa;AAC/B,OAAO,MAAMC,QAAQ,GAAIC,CAAC,IAAKC,YAAY,CAACC,OAAO,CAACJ,SAAS,EAAEE,CAAC,CAAC;AACjE,OAAO,MAAMG,UAAU,GAAGA,CAAA,KAAMF,YAAY,CAACG,UAAU,CAACN,SAAS,CAAC;AAClE,MAAMO,QAAQ,GAAGA,CAAA,KAAMJ,YAAY,CAACK,OAAO,CAACR,SAAS,CAAC;AAEtD,MAAMS,GAAG,GAAGV,KAAK,CAACW,MAAM,CAAC;EACvBC,OAAO,EAAE;AACX,CAAC,CAAC;;AAEF;AACAF,GAAG,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EACvC,MAAMb,CAAC,GAAGK,QAAQ,CAAC,CAAC;EACpB,IAAIL,CAAC,EAAEa,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUd,CAAC,EAAE;EACtD,OAAOa,MAAM;AACf,CAAC,CAAC;;AAEF;AACAN,GAAG,CAACG,YAAY,CAACK,QAAQ,CAACH,GAAG,CAC1BI,GAAG,IAAKA,GAAG,EACXC,GAAG,IAAK;EACP,IAAIA,GAAG,CAACF,QAAQ,IAAIE,GAAG,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IAC/Cf,UAAU,CAAC,CAAC;IACZgB,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;EACA,OAAOC,OAAO,CAACC,MAAM,CAACN,GAAG,CAAC;AAC5B,CACF,CAAC;AAED,OAAO,MAAMO,UAAU,GAAIC,IAAI,IAAKlB,GAAG,CAACmB,IAAI,CAAC,OAAO,EAAED,IAAI,CAAC;AAC3D,OAAO,MAAME,QAAQ,GAAGA,CAACC,MAAM,EAAEH,IAAI,KAAKlB,GAAG,CAACmB,IAAI,CAAC,SAASE,MAAM,SAAS,EAAEH,IAAI,CAAC;AAClF,OAAO,MAAMI,UAAU,GAAGA,CAACD,MAAM,EAAEH,IAAI,KAAKlB,GAAG,CAACmB,IAAI,CAAC,SAASE,MAAM,UAAU,EAAEH,IAAI,CAAC;AACrF,OAAO,MAAMK,YAAY,GAAIF,MAAM,IAAKrB,GAAG,CAACwB,GAAG,CAAC,SAASH,MAAM,UAAU,CAAC;AAC1E,OAAO,MAAMI,eAAe,GAAIJ,MAAM,IAAKrB,GAAG,CAACwB,GAAG,CAAC,SAASH,MAAM,SAAS,CAAC;AAC5E,OAAO,MAAMK,SAAS,GAAGA,CAAA,KAAM1B,GAAG,CAACwB,GAAG,CAAC,QAAQ,CAAC;AAChD,OAAO,MAAMG,KAAK,GAAIT,IAAI,IAAKlB,GAAG,CAACmB,IAAI,CAAC,QAAQ,EAAED,IAAI,CAAC;AACvD,OAAO,MAAMU,YAAY,GAAIV,IAAI,IAAKlB,GAAG,CAACmB,IAAI,CAAC,WAAW,EAAED,IAAI,CAAC;AACjE,OAAO,MAAMW,UAAU,GAAIC,EAAE,IAAK9B,GAAG,CAAC+B,MAAM,CAAC,SAASD,EAAE,EAAE,CAAC;AAC3D,OAAO,MAAME,YAAY,GAAGA,CAACX,MAAM,EAAEY,IAAI,KAAKjC,GAAG,CAAC+B,MAAM,CAAC,SAASV,MAAM,WAAWa,kBAAkB,CAACD,IAAI,CAAC,EAAE,CAAC;AAE9G,eAAejC,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}