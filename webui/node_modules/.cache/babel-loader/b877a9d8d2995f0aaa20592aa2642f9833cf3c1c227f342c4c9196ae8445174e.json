{"ast":null,"code":"import axios from'axios';import{handleAPIError}from'./utils/apiErrorHandler';const TOKEN_KEY='poker_token';export const setToken=t=>localStorage.setItem(TOKEN_KEY,t);export const clearToken=()=>localStorage.removeItem(TOKEN_KEY);const getToken=()=>localStorage.getItem(TOKEN_KEY);const api=axios.create({baseURL:'http://localhost:5051/api'});// inject header\napi.interceptors.request.use(config=>{const t=getToken();if(t)config.headers['Authorization']=\"Bearer \".concat(t);return config;});// auto logout on 401 and handle errors\napi.interceptors.response.use(res=>res,err=>{const errorInfo=handleAPIError(err);if(err.response&&err.response.status===401){clearToken();window.location.href='/login';}// Add error info to the error object for components to use\nerr.errorInfo=errorInfo;return Promise.reject(err);});export const createGame=data=>api.post('/game',data);export const addBuyIn=(gameId,data)=>api.post(\"/game/\".concat(gameId,\"/player\"),data);export const addCashOut=(gameId,data)=>api.post(\"/game/\".concat(gameId,\"/cashout\"),data);export const fetchSummary=gameId=>api.get(\"/game/\".concat(gameId,\"/summary\"));export const fetchSettlement=gameId=>api.get(\"/game/\".concat(gameId,\"/settle\"));export const listGames=()=>api.get('/games');export const login=data=>api.post('/login',data);export const registerUser=data=>api.post('/register',data);export const deleteGame=id=>api.delete(\"/game/\".concat(id));export const renameGame=(id,title)=>api.patch(\"/game/\".concat(id,\"/title\"),{title});export const updateGameDate=(id,date)=>api.patch(\"/game/\".concat(id,\"/date\"),{date});export const updateBuyIn=(gameId,name,idx,amount)=>api.patch(\"/game/\".concat(gameId,\"/player/\").concat(encodeURIComponent(name),\"/buyin/\").concat(idx),{amount});export const deleteBuyIn=(gameId,name,idx)=>api.delete(\"/game/\".concat(gameId,\"/player/\").concat(encodeURIComponent(name),\"/buyin/\").concat(idx));export const removePlayer=(gameId,name)=>api.delete(\"/game/\".concat(gameId,\"/player/\").concat(encodeURIComponent(name)));export default api;","map":{"version":3,"names":["axios","handleAPIError","TOKEN_KEY","setToken","t","localStorage","setItem","clearToken","removeItem","getToken","getItem","api","create","baseURL","interceptors","request","use","config","headers","concat","response","res","err","errorInfo","status","window","location","href","Promise","reject","createGame","data","post","addBuyIn","gameId","addCashOut","fetchSummary","get","fetchSettlement","listGames","login","registerUser","deleteGame","id","delete","renameGame","title","patch","updateGameDate","date","updateBuyIn","name","idx","amount","encodeURIComponent","deleteBuyIn","removePlayer"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/api.js"],"sourcesContent":["import axios from 'axios';\nimport { handleAPIError } from './utils/apiErrorHandler';\n\nconst TOKEN_KEY = 'poker_token';\nexport const setToken = (t) => localStorage.setItem(TOKEN_KEY, t);\nexport const clearToken = () => localStorage.removeItem(TOKEN_KEY);\nconst getToken = () => localStorage.getItem(TOKEN_KEY);\n\nconst api = axios.create({\n  baseURL: 'http://localhost:5051/api', \n});\n\n// inject header\napi.interceptors.request.use((config) => {\n  const t = getToken();\n  if (t) config.headers['Authorization'] = `Bearer ${t}`;\n  return config;\n});\n\n// auto logout on 401 and handle errors\napi.interceptors.response.use(\n  (res) => res,\n  (err) => {\n    const errorInfo = handleAPIError(err);\n    \n    if (err.response && err.response.status === 401) {\n      clearToken();\n      window.location.href = '/login';\n    }\n    \n    // Add error info to the error object for components to use\n    err.errorInfo = errorInfo;\n    return Promise.reject(err);\n  }\n);\n\nexport const createGame = (data) => api.post('/game', data);\nexport const addBuyIn = (gameId, data) => api.post(`/game/${gameId}/player`, data);\nexport const addCashOut = (gameId, data) => api.post(`/game/${gameId}/cashout`, data);\nexport const fetchSummary = (gameId) => api.get(`/game/${gameId}/summary`);\nexport const fetchSettlement = (gameId) => api.get(`/game/${gameId}/settle`);\nexport const listGames = () => api.get('/games');\nexport const login = (data) => api.post('/login', data);\nexport const registerUser = (data) => api.post('/register', data);\nexport const deleteGame = (id) => api.delete(`/game/${id}`);\nexport const renameGame = (id, title) => api.patch(`/game/${id}/title`, { title });\nexport const updateGameDate = (id, date) => api.patch(`/game/${id}/date`, { date });\nexport const updateBuyIn = (gameId,name,idx,amount) => api.patch(`/game/${gameId}/player/${encodeURIComponent(name)}/buyin/${idx}`, { amount });\nexport const deleteBuyIn = (gameId,name,idx) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}/buyin/${idx}`);\nexport const removePlayer = (gameId, name) => api.delete(`/game/${gameId}/player/${encodeURIComponent(name)}`);\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}