{"ast":null,"code":"var _jsxFileName = \"/Users/krishdembla/Desktop/poker-debt-app/webui/src/pages/GamePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState, useMemo, useRef } from 'react';\nimport './GamePage.css';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { addBuyIn, removePlayer, addCashOut, fetchSummary, fetchSettlement } from '../api';\nimport AlertBanner from '../components/AlertBanner';\nimport ThemeToggle from '../components/ThemeToggle';\nimport ConfirmDialog from '../components/ConfirmDialog';\nimport { useToast } from '../context/ToastContext';\nimport TransactionHistoryDialog from '../components/TransactionHistoryDialog';\nimport PlayerCard from '../components/PlayerCard/PlayerCard';\nimport AddPlayerDialog from '../components/AddPlayerDialog/AddPlayerDialog';\nimport { GameContext } from '../context/GameContext';\nimport { useWebSocket } from '../context/WebSocketContext';\nimport { useKeyboardShortcuts } from '../hooks/useKeyboardShortcuts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getFormatter = cur => new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: cur\n});\nconst GamePage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    setGameId\n  } = useContext(GameContext);\n  const {\n    joinGame,\n    leaveGame,\n    ws\n  } = useWebSocket();\n  const [summary, setSummary] = useState([]);\n  const [currency, setCurrency] = useState('USD');\n  const [title, setTitle] = useState('Game');\n  const formatter = getFormatter(currency);\n  const [transactions, setTransactions] = useState([]);\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  // computed totals\n  const totals = useMemo(() => {\n    const buyInsTotal = summary.reduce((s, p) => s + p.totalBuyIn, 0);\n    const cashOutTotal = summary.reduce((s, p) => s + (p.cashOut || 0), 0);\n    return {\n      buyInsTotal,\n      cashOutTotal,\n      profit: buyInsTotal - cashOutTotal\n    };\n  }, [summary]);\n  const [historyOpen, setHistoryOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState(null);\n  const [error, setError] = useState('');\n  const [confirm, setConfirm] = useState({\n    open: false,\n    message: '',\n    action: () => {}\n  });\n  const {\n    showToast\n  } = useToast();\n  const autoSaveTimeoutRef = useRef(null);\n  const [settledAt, setSettledAt] = useState(null);\n  useEffect(() => {\n    setGameId(id);\n    refreshSummary();\n\n    // Join WebSocket room for this game\n    joinGame(id);\n\n    // Set up WebSocket message handler\n    if (ws) {\n      const handleMessage = event => {\n        try {\n          const data = JSON.parse(event.data);\n          if (data.type === 'game_update' && data.data) {\n            // Refresh summary when we receive updates\n            refreshSummary();\n            showToast('Game updated in real-time');\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      ws.addEventListener('message', handleMessage);\n      return () => {\n        ws.removeEventListener('message', handleMessage);\n        leaveGame();\n      };\n    }\n    // eslint-disable-next-line\n  }, [id, ws]);\n  const refreshSummary = async () => {\n    var _res$data$metadata, _res$data$metadata2, _res$data$metadata3;\n    const res = await fetchSummary(id);\n    setSummary(res.data.summary);\n    if ((_res$data$metadata = res.data.metadata) !== null && _res$data$metadata !== void 0 && _res$data$metadata.currency) {\n      setCurrency(res.data.metadata.currency);\n    }\n    if ((_res$data$metadata2 = res.data.metadata) !== null && _res$data$metadata2 !== void 0 && _res$data$metadata2.title) {\n      setTitle(res.data.metadata.title);\n    }\n    if ((_res$data$metadata3 = res.data.metadata) !== null && _res$data$metadata3 !== void 0 && _res$data$metadata3.settledAt) {\n      setSettledAt(res.data.metadata.settledAt);\n    } else {\n      setSettledAt(null);\n    }\n    setError('');\n  };\n\n  // Auto-save functionality\n  const triggerAutoSave = () => {\n    if (autoSaveTimeoutRef.current) {\n      clearTimeout(autoSaveTimeoutRef.current);\n    }\n    autoSaveTimeoutRef.current = setTimeout(() => {\n      showToast('Auto-saved', 'success');\n    }, 2000); // Auto-save after 2 seconds of inactivity\n  };\n  const handleAddPlayer = async playerData => {\n    try {\n      await addBuyIn(id, {\n        name: playerData.name,\n        buyIn: Number(playerData.amount)\n      });\n      refreshSummary();\n      triggerAutoSave();\n      showToast('Player added successfully');\n    } catch (err) {\n      var _err$errorInfo, _err$response, _err$response$data;\n      console.error('Error adding player:', err);\n      const errorMessage = ((_err$errorInfo = err.errorInfo) === null || _err$errorInfo === void 0 ? void 0 : _err$errorInfo.message) || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to add player';\n      setError(errorMessage);\n    }\n  };\n  const handleSettle = async () => {\n    try {\n      const res = await fetchSettlement(id);\n      const txns = res.data.transactions;\n      setTransactions(txns);\n      if (res.data.settledAt) setSettledAt(res.data.settledAt);\n      showToast('Settlement calculated');\n    } catch (err) {\n      if (err.response && err.response.data.error) {\n        setError(err.response.data.error);\n      } else {\n        console.error(err);\n        setError('Unexpected error settling debts');\n      }\n    }\n  };\n\n  // Keyboard shortcuts - moved after function definitions\n  useKeyboardShortcuts({\n    onAddPlayer: () => setShowAddDialog(true),\n    onSettle: handleSettle,\n    onRefresh: refreshSummary,\n    onGoHome: () => navigate('/games'),\n    enabled: true\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"brand\",\n      children: \"ChipMate\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginTop: '0.5rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/games'),\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          flex: 1,\n          textAlign: 'center'\n        },\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ThemeToggle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(AlertBanner, {\n      message: error,\n      onClose: () => setError('')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(AddPlayerDialog, {\n      isOpen: showAddDialog,\n      onClose: () => setShowAddDialog(false),\n      onAddPlayer: handleAddPlayer,\n      onError: errorMessage => {\n        // Only show validation errors in the dialog, not in the main banner\n        // The dialog will handle displaying the error\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '1rem 0',\n        padding: '1rem',\n        border: '1px solid var(--border-color,#ccc)',\n        borderRadius: '8px',\n        display: 'flex',\n        gap: '2rem',\n        flexWrap: 'wrap'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Total Buy-Ins:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 14\n        }, this), \" \", formatter.format(totals.buyInsTotal)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Total Cash-Outs:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 14\n        }, this), \" \", formatter.format(totals.cashOutTotal)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"House Profit:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 14\n        }, this), \" \", formatter.format(totals.profit)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"players-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Players\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), summary.length === 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-first-player-btn\",\n        onClick: () => setShowAddDialog(true),\n        children: \"+ Add First Player\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"player-list-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-list\",\n        children: summary.map(player => /*#__PURE__*/_jsxDEV(PlayerCard, {\n          name: player.name,\n          totalBuyIn: player.totalBuyIn,\n          cashOut: player.cashOut,\n          net: player.net,\n          formatter: formatter,\n          onEditBuyIn: () => {\n            setSelectedPlayer(player);\n            setHistoryOpen(true);\n          },\n          onEditCashOut: async () => {\n            const newCashOut = window.prompt(`Enter cash-out amount for ${player.name}:`, player.cashOut || '');\n\n            // Apply styles to the prompt\n            setTimeout(() => {\n              const promptInput = document.querySelector('input[type=\"text\"]');\n              if (promptInput) {\n                promptInput.style.backgroundColor = 'var(--bg-color, #ffffff)';\n                promptInput.style.color = 'var(--text-primary, #333333)';\n                promptInput.style.border = '1px solid var(--border-color, #cccccc)';\n                promptInput.style.padding = '8px';\n                promptInput.style.borderRadius = '4px';\n                promptInput.style.width = 'calc(100% - 20px)';\n                promptInput.style.maxWidth = '300px';\n              }\n            }, 10);\n            if (newCashOut !== null) {\n              const val = Number(newCashOut);\n              if (!isNaN(val) && val >= 0) {\n                await addCashOut(id, {\n                  name: player.name,\n                  cashOut: val\n                });\n                refreshSummary();\n                triggerAutoSave();\n              } else if (newCashOut === '') {\n                await addCashOut(id, {\n                  name: player.name,\n                  cashOut: 0\n                });\n                refreshSummary();\n                triggerAutoSave();\n              } else {\n                showToast('Please enter a valid number');\n              }\n            }\n          },\n          onViewHistory: () => {\n            setSelectedPlayer(player);\n            setHistoryOpen(true);\n          },\n          onDelete: () => {\n            setConfirm({\n              open: true,\n              message: `Are you sure you want to remove ${player.name}?`,\n              action: async () => {\n                try {\n                  await removePlayer(id, player.name);\n                  refreshSummary();\n                  triggerAutoSave();\n                  showToast('Player removed successfully');\n                } catch (err) {\n                  var _err$response2, _err$response2$data;\n                  setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to remove player');\n                }\n              }\n            });\n          }\n        }, player.name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), summary.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add-player-button\",\n        onClick: () => setShowAddDialog(true),\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '1.2rem'\n          },\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), \" Add Player\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settle-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSettle,\n        className: \"settle-button\",\n        children: \"Settle Debts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmDialog, {\n      open: confirm.open,\n      message: confirm.message,\n      onCancel: () => setConfirm({\n        ...confirm,\n        open: false\n      }),\n      onConfirm: async () => {\n        await confirm.action();\n        setConfirm({\n          ...confirm,\n          open: false\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), transactions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: 'var(--text-primary, #333)',\n          marginBottom: '1rem',\n          fontSize: '1.25rem',\n          fontWeight: '600',\n          paddingBottom: '0.5rem',\n          borderBottom: '2px solid var(--border-color, #eee)'\n        },\n        children: \"Settlement Transactions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"tx-list\",\n        style: {\n          listStyle: 'none',\n          padding: 0,\n          border: '1px solid var(--border-color, #ddd)',\n          borderRadius: '8px',\n          overflow: 'hidden',\n          boxShadow: '0 2px 8px rgba(0,0,0,0.08)'\n        },\n        children: transactions.map((t, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"tx-item\",\n          style: {\n            padding: '1rem 1.25rem',\n            borderBottom: idx < transactions.length - 1 ? '1px solid var(--border-color, #eee)' : 'none',\n            backgroundColor: idx % 2 === 0 ? 'var(--bg-color, #fff)' : 'rgba(0, 0, 0, 0.02)',\n            color: 'var(--text-primary, #333)',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            flexWrap: 'wrap',\n            lineHeight: '1.5'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: '600',\n              color: 'var(--text-primary, #333)'\n            },\n            children: t.from\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'var(--text-secondary, #666)'\n            },\n            children: \"pays\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontWeight: '600',\n              color: 'var(--text-primary, #333)'\n            },\n            children: t.to\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: 'var(--text-secondary, #666)'\n            },\n            children: \":\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"amount\",\n            style: {\n              fontWeight: '700',\n              color: 'var(--accent, #ff6b3d)',\n              marginLeft: 'auto',\n              paddingLeft: '1rem'\n            },\n            children: formatter.format(t.amount)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 17\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TransactionHistoryDialog, {\n      open: historyOpen,\n      player: selectedPlayer,\n      gameId: id,\n      onClose: () => setHistoryOpen(false),\n      refreshSummary: refreshSummary\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 7\n    }, this), settledAt && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: 'var(--accent, #ff6b3d)',\n        color: 'white',\n        padding: '0.75rem 1.25rem',\n        borderRadius: '8px',\n        margin: '1rem 0',\n        textAlign: 'center',\n        fontWeight: 600,\n        fontSize: '1.1rem',\n        letterSpacing: '0.01em',\n        boxShadow: '0 2px 8px rgba(255,107,61,0.08)'\n      },\n      children: [\"Debts settled on \", new Date(settledAt).toLocaleString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this);\n};\n_s(GamePage, \"9t9xnrQgAykojUAmhj74fJW6lnk=\", false, function () {\n  return [useParams, useNavigate, useWebSocket, useToast, useKeyboardShortcuts];\n});\n_c = GamePage;\nexport default GamePage;\nvar _c;\n$RefreshReg$(_c, \"GamePage\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useMemo","useRef","useParams","useNavigate","addBuyIn","removePlayer","addCashOut","fetchSummary","fetchSettlement","AlertBanner","ThemeToggle","ConfirmDialog","useToast","TransactionHistoryDialog","PlayerCard","AddPlayerDialog","GameContext","useWebSocket","useKeyboardShortcuts","jsxDEV","_jsxDEV","getFormatter","cur","Intl","NumberFormat","style","currency","GamePage","_s","id","navigate","setGameId","joinGame","leaveGame","ws","summary","setSummary","setCurrency","title","setTitle","formatter","transactions","setTransactions","showAddDialog","setShowAddDialog","totals","buyInsTotal","reduce","s","p","totalBuyIn","cashOutTotal","cashOut","profit","historyOpen","setHistoryOpen","selectedPlayer","setSelectedPlayer","error","setError","confirm","setConfirm","open","message","action","showToast","autoSaveTimeoutRef","settledAt","setSettledAt","refreshSummary","handleMessage","event","data","JSON","parse","type","console","addEventListener","removeEventListener","_res$data$metadata","_res$data$metadata2","_res$data$metadata3","res","metadata","triggerAutoSave","current","clearTimeout","setTimeout","handleAddPlayer","playerData","name","buyIn","Number","amount","err","_err$errorInfo","_err$response","_err$response$data","errorMessage","errorInfo","response","handleSettle","txns","onAddPlayer","onSettle","onRefresh","onGoHome","enabled","className","children","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","alignItems","marginTop","onClick","flex","textAlign","onClose","isOpen","onError","margin","padding","border","borderRadius","gap","flexWrap","format","length","map","player","net","onEditBuyIn","onEditCashOut","newCashOut","window","prompt","promptInput","document","querySelector","backgroundColor","color","width","maxWidth","val","isNaN","onViewHistory","onDelete","_err$response2","_err$response2$data","fontSize","onCancel","onConfirm","marginBottom","fontWeight","paddingBottom","borderBottom","listStyle","overflow","boxShadow","t","idx","lineHeight","from","to","marginLeft","paddingLeft","gameId","background","letterSpacing","Date","toLocaleString","_c","$RefreshReg$"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/pages/GamePage.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState, useMemo, useRef } from 'react';\nimport './GamePage.css';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  addBuyIn,\n  removePlayer,\n  addCashOut,\n  fetchSummary,\n  fetchSettlement,\n} from '../api';\nimport AlertBanner from '../components/AlertBanner';\nimport ThemeToggle from '../components/ThemeToggle';\nimport ConfirmDialog from '../components/ConfirmDialog';\nimport { useToast } from '../context/ToastContext';\nimport TransactionHistoryDialog from '../components/TransactionHistoryDialog';\nimport PlayerCard from '../components/PlayerCard/PlayerCard';\nimport AddPlayerDialog from '../components/AddPlayerDialog/AddPlayerDialog';\nimport { GameContext } from '../context/GameContext';\nimport { useWebSocket } from '../context/WebSocketContext';\nimport { useKeyboardShortcuts } from '../hooks/useKeyboardShortcuts';\n\n\nconst getFormatter = (cur) => new Intl.NumberFormat('en-US', { style: 'currency', currency: cur });\n\n\nconst GamePage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { setGameId } = useContext(GameContext);\n  const { joinGame, leaveGame, ws } = useWebSocket();\n  const [summary, setSummary] = useState([]);\n  const [currency, setCurrency] = useState('USD');\n  const [title, setTitle] = useState('Game');\n  const formatter = getFormatter(currency);\n  const [transactions, setTransactions] = useState([]);\n  const [showAddDialog, setShowAddDialog] = useState(false);\n  // computed totals\n  const totals = useMemo(() => {\n    const buyInsTotal = summary.reduce((s, p) => s + p.totalBuyIn, 0);\n    const cashOutTotal = summary.reduce((s, p) => s + (p.cashOut || 0), 0);\n    return { buyInsTotal, cashOutTotal, profit: buyInsTotal - cashOutTotal };\n  }, [summary]);\n\n  const [historyOpen, setHistoryOpen] = useState(false);\n  const [selectedPlayer, setSelectedPlayer] = useState(null);\n  const [error, setError] = useState('');\n  const [confirm, setConfirm] = useState({ open: false, message: '', action: () => {} });\n  const { showToast } = useToast();\n  const autoSaveTimeoutRef = useRef(null);\n  const [settledAt, setSettledAt] = useState(null);\n\n  useEffect(() => {\n    setGameId(id);\n    refreshSummary();\n    \n    // Join WebSocket room for this game\n    joinGame(id);\n    \n    // Set up WebSocket message handler\n    if (ws) {\n      const handleMessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          if (data.type === 'game_update' && data.data) {\n            // Refresh summary when we receive updates\n            refreshSummary();\n            showToast('Game updated in real-time');\n          }\n        } catch (error) {\n          console.error('Error parsing WebSocket message:', error);\n        }\n      };\n      \n      ws.addEventListener('message', handleMessage);\n      \n      return () => {\n        ws.removeEventListener('message', handleMessage);\n        leaveGame();\n      };\n    }\n    // eslint-disable-next-line\n  }, [id, ws]);\n\n  const refreshSummary = async () => {\n    const res = await fetchSummary(id);\n    setSummary(res.data.summary);\n    if (res.data.metadata?.currency) {\n      setCurrency(res.data.metadata.currency);\n    }\n    if (res.data.metadata?.title) {\n      setTitle(res.data.metadata.title);\n    }\n    if (res.data.metadata?.settledAt) {\n      setSettledAt(res.data.metadata.settledAt);\n    } else {\n      setSettledAt(null);\n    }\n    setError('');\n  };\n\n  // Auto-save functionality\n  const triggerAutoSave = () => {\n    if (autoSaveTimeoutRef.current) {\n      clearTimeout(autoSaveTimeoutRef.current);\n    }\n    \n    autoSaveTimeoutRef.current = setTimeout(() => {\n      showToast('Auto-saved', 'success');\n    }, 2000); // Auto-save after 2 seconds of inactivity\n  };\n\n  const handleAddPlayer = async (playerData) => {\n    try {\n      await addBuyIn(id, { name: playerData.name, buyIn: Number(playerData.amount) });\n      refreshSummary();\n      triggerAutoSave();\n      showToast('Player added successfully');\n    } catch (err) {\n      console.error('Error adding player:', err);\n      const errorMessage = err.errorInfo?.message || err.response?.data?.error || 'Failed to add player';\n      setError(errorMessage);\n    }\n  };\n\n  const handleSettle = async () => {\n    try {\n      const res = await fetchSettlement(id);\n      const txns = res.data.transactions;\n      setTransactions(txns);\n      if (res.data.settledAt) setSettledAt(res.data.settledAt);\n      showToast('Settlement calculated');\n    } catch (err) {\n      if (err.response && err.response.data.error) {\n        setError(err.response.data.error);\n      } else {\n        console.error(err);\n        setError('Unexpected error settling debts');\n      }\n    }\n  };\n\n  // Keyboard shortcuts - moved after function definitions\n  useKeyboardShortcuts({\n    onAddPlayer: () => setShowAddDialog(true),\n    onSettle: handleSettle,\n    onRefresh: refreshSummary,\n    onGoHome: () => navigate('/games'),\n    enabled: true\n  });\n\n  return (\n    <div className=\"container\">\n      <div className=\"brand\">ChipMate</div>\n      <div style={{ display:'flex', justifyContent:'space-between', alignItems:'center', marginTop:'0.5rem' }}>\n        <button onClick={()=>navigate('/games')}>&larr; Back</button>\n        <h2 style={{ flex:1, textAlign:'center' }}>{title}</h2>\n        <ThemeToggle />\n      </div>\n      {error && <AlertBanner message={error} onClose={() => setError('')} />}\n      \n\n      {/* Add Player Dialog */}\n      <AddPlayerDialog\n        isOpen={showAddDialog}\n        onClose={() => setShowAddDialog(false)}\n        onAddPlayer={handleAddPlayer}\n        onError={(errorMessage) => {\n          // Only show validation errors in the dialog, not in the main banner\n          // The dialog will handle displaying the error\n        }}\n      />\n\n      <div style={{margin:'1rem 0', padding:'1rem', border:'1px solid var(--border-color,#ccc)', borderRadius:'8px', display:'flex', gap:'2rem', flexWrap:'wrap'}}>\n        <div><strong>Total Buy-Ins:</strong> {formatter.format(totals.buyInsTotal)}</div>\n        <div><strong>Total Cash-Outs:</strong> {formatter.format(totals.cashOutTotal)}</div>\n        <div><strong>House Profit:</strong> {formatter.format(totals.profit)}</div>\n      </div>\n\n      <div className=\"players-header\">\n        <h3>Players</h3>\n        {summary.length === 0 && (\n          <button \n            className=\"add-first-player-btn\"\n            onClick={() => setShowAddDialog(true)}\n          >\n            + Add First Player\n          </button>\n        )}\n      </div>\n      <div className=\"player-list-container\">\n        <div className=\"player-list\">\n          {summary.map((player) => (\n            <PlayerCard\n              key={player.name}\n              name={player.name}\n              totalBuyIn={player.totalBuyIn}\n              cashOut={player.cashOut}\n              net={player.net}\n              formatter={formatter}\n              onEditBuyIn={() => {\n                setSelectedPlayer(player);\n                setHistoryOpen(true);\n              }}\n              onEditCashOut={async () => {\n                const newCashOut = window.prompt(\n                  `Enter cash-out amount for ${player.name}:`, \n                  player.cashOut || ''\n                );\n                \n                // Apply styles to the prompt\n                setTimeout(() => {\n                  const promptInput = document.querySelector('input[type=\"text\"]');\n                  if (promptInput) {\n                    promptInput.style.backgroundColor = 'var(--bg-color, #ffffff)';\n                    promptInput.style.color = 'var(--text-primary, #333333)';\n                    promptInput.style.border = '1px solid var(--border-color, #cccccc)';\n                    promptInput.style.padding = '8px';\n                    promptInput.style.borderRadius = '4px';\n                    promptInput.style.width = 'calc(100% - 20px)';\n                    promptInput.style.maxWidth = '300px';\n                  }\n                }, 10);\n                \n                if (newCashOut !== null) {\n                  const val = Number(newCashOut);\n                  if (!isNaN(val) && val >= 0) {\n                    await addCashOut(id, { name: player.name, cashOut: val });\n                    refreshSummary();\n                    triggerAutoSave();\n                  } else if (newCashOut === '') {\n                    await addCashOut(id, { name: player.name, cashOut: 0 });\n                    refreshSummary();\n                    triggerAutoSave();\n                  } else {\n                    showToast('Please enter a valid number');\n                  }\n                }\n              }}\n              onViewHistory={() => {\n                setSelectedPlayer(player);\n                setHistoryOpen(true);\n              }}\n              onDelete={() => {\n                setConfirm({\n                  open: true,\n                  message: `Are you sure you want to remove ${player.name}?`,\n                  action: async () => {\n                    try {\n                      await removePlayer(id, player.name);\n                      refreshSummary();\n                      triggerAutoSave();\n                      showToast('Player removed successfully');\n                    } catch (err) {\n                      setError(err.response?.data?.error || 'Failed to remove player');\n                    }\n                  }\n                });\n              }}\n            />\n          ))}\n        </div>\n        \n        {summary.length > 0 && (\n        <button \n          className=\"add-player-button\"\n          onClick={() => setShowAddDialog(true)}\n        >\n          <span style={{ fontSize: '1.2rem' }}>+</span> Add Player\n        </button>\n      )}\n      </div>\n\n      <div className=\"settle-button-container\">\n        <button \n          onClick={handleSettle}\n          className=\"settle-button\"\n        >\n          Settle Debts\n        </button>\n      </div>\n\n      <ConfirmDialog open={confirm.open} message={confirm.message} onCancel={()=>setConfirm({...confirm,open:false})} onConfirm={async ()=>{ await confirm.action(); setConfirm({...confirm,open:false}); }} />\n\n      {transactions.length > 0 && (\n        <div style={{ marginTop: '2rem' }}>\n          <h3 style={{ \n            color: 'var(--text-primary, #333)', \n            marginBottom: '1rem',\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            paddingBottom: '0.5rem',\n            borderBottom: '2px solid var(--border-color, #eee)'\n          }}>\n            Settlement Transactions\n          </h3>\n          <ul className=\"tx-list\" style={{ \n            listStyle: 'none', \n            padding: 0,\n            border: '1px solid var(--border-color, #ddd)',\n            borderRadius: '8px',\n            overflow: 'hidden',\n            boxShadow: '0 2px 8px rgba(0,0,0,0.08)'\n          }}>\n            {transactions.map((t, idx) => (\n              <li key={idx} className=\"tx-item\" style={{\n                padding: '1rem 1.25rem',\n                borderBottom: idx < transactions.length - 1 ? '1px solid var(--border-color, #eee)' : 'none',\n                backgroundColor: idx % 2 === 0 ? 'var(--bg-color, #fff)' : 'rgba(0, 0, 0, 0.02)',\n                color: 'var(--text-primary, #333)',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                flexWrap: 'wrap',\n                lineHeight: '1.5'\n              }}>\n                <span style={{ fontWeight: '600', color: 'var(--text-primary, #333)' }}>{t.from}</span>\n                <span style={{ color: 'var(--text-secondary, #666)' }}>pays</span>\n                <span style={{ fontWeight: '600', color: 'var(--text-primary, #333)' }}>{t.to}</span>\n                <span style={{ color: 'var(--text-secondary, #666)' }}>:</span>\n                <span className=\"amount\" style={{\n                  fontWeight: '700',\n                  color: 'var(--accent, #ff6b3d)',\n                  marginLeft: 'auto',\n                  paddingLeft: '1rem'\n                }}>\n                  {formatter.format(t.amount)}\n                </span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      <TransactionHistoryDialog open={historyOpen} player={selectedPlayer} gameId={id} onClose={()=>setHistoryOpen(false)} refreshSummary={refreshSummary} />\n\n      {settledAt && (\n        <div style={{\n          background: 'var(--accent, #ff6b3d)',\n          color: 'white',\n          padding: '0.75rem 1.25rem',\n          borderRadius: '8px',\n          margin: '1rem 0',\n          textAlign: 'center',\n          fontWeight: 600,\n          fontSize: '1.1rem',\n          letterSpacing: '0.01em',\n          boxShadow: '0 2px 8px rgba(255,107,61,0.08)'\n        }}>\n          Debts settled on {new Date(settledAt).toLocaleString()}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default GamePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}