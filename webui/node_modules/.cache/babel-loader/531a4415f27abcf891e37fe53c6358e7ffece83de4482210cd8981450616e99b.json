{"ast":null,"code":"// API Error Handler Utility\nexport class APIError extends Error{constructor(message,status){let details=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;super(message);this.name='APIError';this.status=status;this.details=details;}}export const handleAPIError=error=>{console.error('API Error:',error);// Network errors\nif(!error.response){return{message:'Network error. Please check your connection and try again.',type:'network'};}const{status,data}=error.response;// Handle different HTTP status codes\nswitch(status){case 400:if(data.details&&Array.isArray(data.details)){// Validation errors\nconst fieldErrors=data.details.map(detail=>\"\".concat(detail.field,\": \").concat(detail.message)).join(', ');return{message:\"Validation error: \".concat(fieldErrors),type:'validation',details:data.details};}return{message:data.error||'Invalid request',type:'validation'};case 401:return{message:'Please log in again to continue.',type:'auth',shouldRedirect:'/login'};case 403:return{message:'You do not have permission to perform this action.',type:'permission'};case 404:return{message:'The requested resource was not found.',type:'not_found'};case 429:return{message:'Too many requests. Please wait a moment and try again.',type:'rate_limit'};case 500:return{message:'Server error. Please try again later.',type:'server'};default:return{message:data.error||'An unexpected error occurred.',type:'unknown'};}};export const sanitizeInput=input=>{if(typeof input!=='string')return input;return input.replace(/<[^>]*>/g,'')// Remove HTML tags\n.replace(/[<>\"'&]/g,'')// Remove dangerous characters\n.trim();};export const validatePlayerName=name=>{if(!name||typeof name!=='string'){throw new Error('Player name is required');}const sanitized=sanitizeInput(name);if(sanitized.length===0){throw new Error('Player name cannot be empty');}if(sanitized.length>50){throw new Error('Player name must be 50 characters or less');}if(!/^[a-zA-Z0-9\\s\\-_]+$/.test(sanitized)){throw new Error('Player name can only contain letters, numbers, spaces, hyphens, and underscores');}return sanitized;};export const validateAmount=amount=>{const num=Number(amount);if(isNaN(num)){throw new Error('Amount must be a valid number');}if(num<0){throw new Error('Amount cannot be negative');}if(num>999999.99){throw new Error('Amount cannot exceed 999,999.99');}return Math.round(num*100)/100;};","map":{"version":3,"names":["APIError","Error","constructor","message","status","details","arguments","length","undefined","name","handleAPIError","error","console","response","type","data","Array","isArray","fieldErrors","map","detail","concat","field","join","shouldRedirect","sanitizeInput","input","replace","trim","validatePlayerName","sanitized","test","validateAmount","amount","num","Number","isNaN","Math","round"],"sources":["/Users/krishdembla/Desktop/poker-debt-app/webui/src/utils/apiErrorHandler.js"],"sourcesContent":["// API Error Handler Utility\nexport class APIError extends Error {\n  constructor(message, status, details = null) {\n    super(message);\n    this.name = 'APIError';\n    this.status = status;\n    this.details = details;\n  }\n}\n\nexport const handleAPIError = (error) => {\n  console.error('API Error:', error);\n\n  // Network errors\n  if (!error.response) {\n    return {\n      message: 'Network error. Please check your connection and try again.',\n      type: 'network'\n    };\n  }\n\n  const { status, data } = error.response;\n\n  // Handle different HTTP status codes\n  switch (status) {\n    case 400:\n      if (data.details && Array.isArray(data.details)) {\n        // Validation errors\n        const fieldErrors = data.details.map(detail => \n          `${detail.field}: ${detail.message}`\n        ).join(', ');\n        return {\n          message: `Validation error: ${fieldErrors}`,\n          type: 'validation',\n          details: data.details\n        };\n      }\n      return {\n        message: data.error || 'Invalid request',\n        type: 'validation'\n      };\n\n    case 401:\n      return {\n        message: 'Please log in again to continue.',\n        type: 'auth',\n        shouldRedirect: '/login'\n      };\n\n    case 403:\n      return {\n        message: 'You do not have permission to perform this action.',\n        type: 'permission'\n      };\n\n    case 404:\n      return {\n        message: 'The requested resource was not found.',\n        type: 'not_found'\n      };\n\n    case 429:\n      return {\n        message: 'Too many requests. Please wait a moment and try again.',\n        type: 'rate_limit'\n      };\n\n    case 500:\n      return {\n        message: 'Server error. Please try again later.',\n        type: 'server'\n      };\n\n    default:\n      return {\n        message: data.error || 'An unexpected error occurred.',\n        type: 'unknown'\n      };\n  }\n};\n\nexport const sanitizeInput = (input) => {\n  if (typeof input !== 'string') return input;\n  \n  return input\n    .replace(/<[^>]*>/g, '') // Remove HTML tags\n    .replace(/[<>\"'&]/g, '') // Remove dangerous characters\n    .trim();\n};\n\nexport const validatePlayerName = (name) => {\n  if (!name || typeof name !== 'string') {\n    throw new Error('Player name is required');\n  }\n  \n  const sanitized = sanitizeInput(name);\n  \n  if (sanitized.length === 0) {\n    throw new Error('Player name cannot be empty');\n  }\n  \n  if (sanitized.length > 50) {\n    throw new Error('Player name must be 50 characters or less');\n  }\n  \n  if (!/^[a-zA-Z0-9\\s\\-_]+$/.test(sanitized)) {\n    throw new Error('Player name can only contain letters, numbers, spaces, hyphens, and underscores');\n  }\n  \n  return sanitized;\n};\n\nexport const validateAmount = (amount) => {\n  const num = Number(amount);\n  \n  if (isNaN(num)) {\n    throw new Error('Amount must be a valid number');\n  }\n  \n  if (num < 0) {\n    throw new Error('Amount cannot be negative');\n  }\n  \n  if (num > 999999.99) {\n    throw new Error('Amount cannot exceed 999,999.99');\n  }\n  \n  return Math.round(num * 100) / 100;\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}